<UserControl xmlns="https://github.com/avaloniaui"
          xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
          xmlns:vm="clr-namespace:LogisticsPro.UI.ViewModels"
          x:Class="LogisticsPro.UI.Views.Admin.Sections.ActivitySection"
          x:DataType="vm:AdminDashboardViewModel">
    
    
    <Grid Margin="20" RowDefinitions="Auto,*">
    <!-- Header Section -->
    <Grid Grid.Row="0" ColumnDefinitions="*,Auto,Auto" Margin="0,0,0,20">
        <StackPanel Grid.Column="0" VerticalAlignment="Center">
            <TextBlock Text="âš¡ Recent System Activity" 
                       FontSize="24" 
                       FontWeight="Bold" 
                       Foreground="#1E293B"/>
            <TextBlock Text="Live feed of all system activities and user actions" 
                       FontSize="14" 
                       Foreground="#64748B" 
                       Margin="0,5,0,0"/>
        </StackPanel>
        
        <!-- Filter Dropdown (Future Enhancement) -->
        <ComboBox Grid.Column="1" 
                  Width="150" 
                  Margin="0,0,15,0"
                  VerticalAlignment="Center"
                  SelectedIndex="0">
            <ComboBoxItem Content="All Activities"/>
            <ComboBoxItem Content="Orders Only"/>
            <ComboBoxItem Content="Approvals Only"/>
            <ComboBoxItem Content="Shipments Only"/>
        </ComboBox>
        
        <!-- Refresh Button -->
        <Button Grid.Column="2" 
                Command="{Binding RefreshDataCommand}"
                Background="#3B82F6" 
                Foreground="White" 
                Padding="15,8" 
                CornerRadius="6"
                BorderThickness="0">
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="ðŸ”„" FontSize="14" Margin="0,0,8,0"/>
                <TextBlock Text="Refresh" FontSize="14" FontWeight="Medium"/>
            </StackPanel>
        </Button>
    </Grid>

    <!-- Activity Feed -->
    <Border Grid.Row="1" 
            Background="White" 
            BorderBrush="#E5E7EB" 
            BorderThickness="1" 
            CornerRadius="12"
            BoxShadow="0 1 3 0 #19000000">
        
        <Grid RowDefinitions="Auto,*">
            
            <!-- Activity Count Header -->
            <Border Grid.Row="0" 
                    Background="#F9FAFB" 
                    Padding="20,15" 
                    CornerRadius="12,12,0,0"
                    BorderBrush="#E5E7EB" 
                    BorderThickness="0,0,0,1">
                <Grid ColumnDefinitions="*,Auto">
                    <TextBlock Grid.Column="0" 
                               Text="{Binding RecentActivities.Count, StringFormat='Showing {0} recent activities'}" 
                               FontSize="14" 
                               FontWeight="Medium" 
                               Foreground="#374151"/>
                    <TextBlock Grid.Column="1" 
                               Text="Last updated: just now" 
                               FontSize="12" 
                               Foreground="#9CA3AF"/>
                </Grid>
            </Border>

                           <!-- Scrollable Activity List -->
                <ScrollViewer Grid.Row="1" 
                           VerticalScrollBarVisibility="Auto" 
                           HorizontalScrollBarVisibility="Disabled"
                           Padding="0">
                <Grid>
                    <!-- Activities ItemsControl -->
                    <ItemsControl ItemsSource="{Binding RecentActivities}" Margin="0">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border Padding="20,16" 
                                        BorderBrush="#F3F4F6" 
                                        BorderThickness="0,0,0,1"
                                        Background="Transparent">
                                    
                                    <!-- Hover Effect -->
                                    <Border.Styles>
                                        <Style Selector="Border:pointerover">
                                            <Setter Property="Background" Value="#F9FAFB"/>
                                        </Style>
                                    </Border.Styles>
                                    
                                    <Grid ColumnDefinitions="Auto,*,Auto">
                                        
                                        <!-- Activity Icon -->
                                        <Border Grid.Column="0" 
                                                Background="{Binding IconColor}" 
                                                CornerRadius="50" 
                                                Width="40" 
                                                Height="40" 
                                                Margin="0,0,16,0"
                                                BoxShadow="0 1 3 0 #19000000">
                                            <TextBlock Text="{Binding IconText}" 
                                                       FontSize="16" 
                                                       Foreground="White" 
                                                       FontWeight="Bold"
                                                       HorizontalAlignment="Center" 
                                                       VerticalAlignment="Center"/>
                                        </Border>
                                        
                                        <!-- Activity Content -->
                                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                            <!-- Main Description -->
                                            <TextBlock Text="{Binding Description}" 
                                                       FontSize="15" 
                                                       FontWeight="Medium" 
                                                       Foreground="#111827"
                                                       TextWrapping="Wrap"/>
                                            
                                            <!-- Details -->
                                            <TextBlock Text="{Binding Details}" 
                                                       FontSize="13" 
                                                       Foreground="#6B7280" 
                                                       TextWrapping="Wrap"
                                                       Margin="0,4,0,0"/>
                                            
                                            <!-- User Badge -->
                                            <Border Background="#EFF6FF" 
                                                    CornerRadius="12" 
                                                    Padding="8,4" 
                                                    HorizontalAlignment="Left"
                                                    Margin="0,6,0,0">
                                                <TextBlock Text="{Binding UserName, StringFormat='ðŸ‘¤ {0}'}" 
                                                           FontSize="11" 
                                                           FontWeight="Medium"
                                                           Foreground="#1E40AF"/>
                                            </Border>
                                        </StackPanel>
                                        
                                        <!-- Timestamp -->
                                        <StackPanel Grid.Column="2" 
                                                    VerticalAlignment="Center" 
                                                    HorizontalAlignment="Right"
                                                    Margin="16,0,0,0">
                                            <TextBlock Text="{Binding FormattedTimestamp}" 
                                                       FontSize="12" 
                                                       FontWeight="Medium"
                                                       Foreground="#9CA3AF" 
                                                       HorizontalAlignment="Right"/>
                                            <TextBlock Text="{Binding Timestamp, StringFormat='{}{0:MMM d, h:mm tt}'}" 
                                                       FontSize="10" 
                                                       Foreground="#D1D5DB" 
                                                       HorizontalAlignment="Right"
                                                       Margin="0,2,0,0"/>
                                        </StackPanel>
                                        
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                    
                    <!-- Empty State -->
                    <Border IsVisible="{Binding !RecentActivities.Count}" 
                            Padding="60,40" 
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center">
                        <StackPanel HorizontalAlignment="Center">
                            <TextBlock Text="ðŸ“­" 
                                       FontSize="48" 
                                       HorizontalAlignment="Center" 
                                       Opacity="0.6"/>
                            <TextBlock Text="No recent activities" 
                                       FontSize="18" 
                                       FontWeight="Medium" 
                                       Foreground="#6B7280" 
                                       HorizontalAlignment="Center"
                                       Margin="0,12,0,0"/>
                            <TextBlock Text="System activities will appear here as users interact with the platform" 
                                       FontSize="14" 
                                       Foreground="#9CA3AF" 
                                       HorizontalAlignment="Center"
                                       TextAlignment="Center"
                                       Margin="0,12,0,0"/>
                        </StackPanel>
                    </Border>
                </Grid>
                
            </ScrollViewer>
        </Grid>
    </Border>
    
</Grid>
</UserControl>